{"version":3,"sources":["../node_modules/peerjs/dist sync","components/Knob.js","components/LabeledKnob.js","components/icon/SineWaveIcon.js","components/icon/TriangleWaveIcon.js","components/icon/SquareWaveIcon.js","components/icon/SawtoothWaveIcon.js","components/WaveformSelector.js","utils/KeyboardUtils.js","components/Keyboard.js","components/DegreeKnob.js","components/Sequencer.js","components/Oscilloscope.js","components/SpectrumAnalyser.js","components/VisibilitySettings.js","Synthesizer.js","utils/AudioUtils.js","webRtcConnection.js","components/SynthContainer.js","App.js","registerServiceWorker.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","Knob","props","min","max","value","state","hideOverflow","inputTranslationFraction","inputOnChange","bind","this","inputRef","addEventListener","removeEventListener","rotationFraction","setState","step","onChange","rotationDegrees","className","style","overflow","transform","type","Number","target","ref","onMouseDown","onMouseUp","React","Component","defaultProps","LabeledKnob","label","valueKey","config","toFixed","SineWaveIcon","viewBox","d","TriangleWaveIcon","SquareWaveIcon","SawtoothWaveIcon","options","WaveformSelector","clearable","searchable","keyToDegree","degreeToNote","keyToPosition","degreeToFrequency","degree","Keyboard","keysHeld","sequencedNote","onKeyDown","onKeyUp","document","body","doFrame","getCurrentTime","tempo","pattern","secondsPerBeat","currentBeatIndex","Math","floor","currentNote","activeSettings","degreeSettings","animationFrame","requestAnimationFrame","cancelAnimationFrame","includes","key","pull","whiteKeys","Object","entries","filter","sort","blackKeys","height","position","padding","map","left","paddingTop","DegreeKnob","noteDegrees","values","minNoteDegree","maxNoteDegree","Sequencer","beatIndex","onKnobChanged","onNoteDegreeChange","selected","onNoteActiveChange","mergedDegreeSettings","range","reduce","acc","i","wrapperClasses","checked","Boolean","onNoteSelected","htmlFor","Oscilloscope","analyser","bufferLength","fftSize","dataArray","Float32Array","canvasCtx","canvasRef","getContext","onAnimationFrame","firstCross","vco1Octave","vco2Octave","freq","sampleRate","oscPeriod","timeInSamples","round","getFloatTimeDomainData","length","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","sliceWidth","WIDTH","x","y","HEIGHT","moveTo","lineTo","width","stroke","SpectrumAnalyser","getFloatFrequencyData","logScale","log","SectionSetting","sectionName","VisibilitySettings","sectionsShown","defaultConfig","vco1Volume","vco1Waveform","vco1Detune","vco2Volume","vco2Waveform","vco2Detune","noiseVolume","fltHighPassFreq","fltHighPassRes","fltLowPassFreq","fltLowPassRes","globalVolume","lfoFreq","vcoFreqEnvMod","vcoFreqLfoMod","fltHpEnvMod","fltHpLfoMod","fltLpEnvMod","fltLpLfoMod","envAttack","envDecay","envSustain","envRelease","createSynthesizer","audioCtx","vco1","createOscillator","frequency","detune","start","vco1OctaveDetune","createConstantSource","offset","vco2","vco2OctaveDetune","noiseSource","noiseBuf","createBuffer","channel","numberOfChannels","nowBuffering","getChannelData","random","createBufferSource","buffer","loop","createNoiseSource","vco1Amp","createGain","gain","vco2Amp","noiseAmp","vcoOverallAmp","fltHighPass","createBiquadFilter","Q","fltLowPass","volume","envelopeSource","envelopeGain","setValueAtTime","connect","envelopeGenerator","EnvGen","mode","attackTime","decayTime","sustainLevel","releaseTime","lfo","createAnalyser","destination","configToUpdater","v","scheduleAttackAtTime","time","gateOn","scheduleReleaseAtTime","gateOff","setVcoFrequencyAtTime","updateConfig","configUpdates","forEach","updater","peers","onOpen","domSystemTime","getElementById","domSyncTime","domOffset","domSyncing","ts","timesync","interval","delay","timeout","now","currentTime","on","console","peer","connections","some","conn","open","openConnections","join","innerHTML","send","data","all","toString","Promise","setTimeout","updateDisplay","innerText","Peer","host","port","secure","debug","connectToPeers","undefined","setupConnection","receive","err","setInterval","convertToBooleanConfig","convertToNumericConfig","isNaN","defaultSectionsShown","keyboard","sequencer","modulation","getStateFromQueryString","queryString","window","location","search","slice","queryParams","qs","arrayLimit","synthConfig","omit","na","nd","ss","SynthContainer","queryState","AudioContext","latencyHint","synthesizer","keyIsHeld","vco1Freq","vco2Freq","isLeader","peerId","connectedPeerId","onConfigChange","onVisibilityChange","connectToPeer","becomeLeader","pushHistoryUpdateDebounced","debounce","pushHistoryUpdate","trailing","push","onKeysChanged","splice","indexOf","lastScheduledTime","scheduleNotes","startTime","endTime","NOTE_SCHEDULING_RANGE_MS","nextAttackIndex","ceil","attacks","attackIndex","scheduleAttack","nextAttackTime","timeToRelease","pingPeer","socket","resume","configDiff","diff","history","pushState","onReleaseTrigger","onAttackTrigger","setVcoFreq","note","active","onClick","marginTop","App","isLocalhost","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","error","ReactDOM","render","URL","process","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.f2cfef4e.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 115;","import React from 'react';\nimport './Knob.css';\n\nconst KNOB_RANGE_DEGREES = 270;\nconst KNOB_START_DEGREES = -1 * (360 - KNOB_RANGE_DEGREES) / 2;\n\nconst SLIDER_WIDTH_PX = 250;\n\nconst defaultProps = {\n  min: 0,\n  max: 1,\n  step: 'any',\n};\n\nclass Knob extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const {\n      min,\n      max,\n      value,\n    } = props;\n\n    this.state = {\n      hideOverflow: true,\n      inputTranslationFraction: (value - min) / (max - min),\n    };\n\n    this.inputOnChange = this.inputOnChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.inputRef.addEventListener('change', this.inputOnChange);\n  }\n\n  componentWillUnmount() {\n    this.inputRef.removeEventListener('change', this.inputOnChange);\n  }\n\n  inputOnChange(e) {\n    const {\n      min,\n      max,\n      value,\n    } = this.props;\n\n    const rotationFraction = (value - min) / (max - min);\n\n    this.setState({\n      hideOverflow: true,\n      inputTranslationFraction: rotationFraction\n    });\n  }\n\n  render() {\n    const {\n      min,\n      max,\n      value,\n      step,\n      onChange,\n    } = this.props;\n\n    const {\n      hideOverflow,\n    } = this.state;\n\n    const { inputTranslationFraction } = this.state;\n\n    const rotationFraction = (value - min) / (max - min);\n    const rotationDegrees = KNOB_START_DEGREES + KNOB_RANGE_DEGREES * rotationFraction;\n\n    return (\n      <div\n        className=\"knob__container\"\n        style={{\n          overflow: hideOverflow ? 'hidden' : 'visible',\n        }}\n      >\n        <div\n          className=\"knob__spinner\"\n          style={{\n            transform: `rotate(${rotationDegrees}deg)`\n          }}\n        >\n          <div className=\"knob__marker\"></div>\n        </div>\n        <input\n          type=\"range\"\n          className=\"knob__input\"\n          min={min}\n          max={max}\n          step={step}\n          value={value}\n          onChange={(e) => { onChange(Number(e.target.value)); }}\n          ref={(ref) => { this.inputRef = ref; }}\n          onMouseDown={() => {\n            this.setState({\n              hideOverflow: false,\n            });\n          }}\n          onMouseUp={this.inputOnChange}\n          style={{\n            transform: `translate(${-inputTranslationFraction * SLIDER_WIDTH_PX}px, 0)`,\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nKnob.defaultProps = defaultProps;\n\nexport default Knob;\n","import React from 'react';\nimport './LabeledKnob.css';\n\nimport Knob from './Knob';\n\nconst defaultProps = {\n  min: 0,\n  max: 1,\n  step: 'any',\n};\n\nfunction LabeledKnob({\n  label,\n  min,\n  max,\n  step,\n  valueKey,\n  config,\n  onChange,\n}) {\n  return (\n    <div>\n      <div className=\"labeled-knob__label\">\n        {label}\n      </div>\n      <Knob\n        min={min}\n        max={max}\n        step={step}\n        value={config[valueKey]}\n        onChange={(value) => onChange(valueKey, value)}\n      />\n      <div className=\"labeled-knob__value\">\n        {Number(config[valueKey]).toFixed(1)}\n      </div>\n    </div>\n  );\n}\n\nLabeledKnob.defaultProps = defaultProps;\n\nexport default LabeledKnob;\n","import React from 'react';\n\nexport default function SineWaveIcon() {\n  return (\n    <svg viewBox=\"0 25 100 50\" className=\"waveform-icon\">\n      <path d=\"M89.2 60.8c-4.5 0-6.6-5.3-8.6-10.4-1.8-4.5-3.6-9.1-6.8-9.1s-5 4.6-6.8 9.1c-2 5.1-4.1 10.4-8.6 10.4s-6.6-5.3-8.6-10.4c-1.8-4.5-3.6-9.1-6.8-9.1s-5 4.6-6.8 9.1c-2 5.1-4.1 10.4-8.6 10.4S21 55.5 19 50.4c-1.8-4.5-3.6-9.1-6.8-9.1-.6 0-1-.4-1-1s.4-1 1-1c4.5 0 6.6 5.3 8.6 10.4 1.8 4.5 3.6 9.1 6.8 9.1 3.2 0 5-4.6 6.8-9.1 2-5.1 4.1-10.4 8.6-10.4s6.6 5.3 8.6 10.4c1.8 4.5 3.6 9.1 6.8 9.1 3.2 0 5-4.6 6.8-9.1 2-5.1 4.1-10.4 8.6-10.4s6.6 5.3 8.6 10.4c1.8 4.5 3.6 9.1 6.8 9.1.6 0 1 .4 1 1s-.4 1-1 1z\" />\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport default function TriangleWaveIcon() {\n  return (\n    <svg viewBox=\"0 25 100 50\" className=\"waveform-icon\">\n      <path d=\"M57.5 61.7l-15-20-15 20-15.8-21.1 1.6-1.2 14.2 18.9 15-20 15 20 15-20 15.8 21.1-1.6 1.2-14.2-18.9z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport default function SquareWaveIcon() {\n  return (\n    <svg viewBox=\"0 25 100 50\" className=\"waveform-icon\">\n      <path d=\"M95 61H79V41H66v20H49V41H36v20H19V41H5v-2h16v20h13V39h17v20h13V39h17v20h14z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\nexport default function SawtoothWaveIcon() {\n  return (\n    <svg viewBox=\"0 25 100 50\" className=\"waveform-icon\">\n      <g transform=\"scale(-1,1) translate(-100, 0)\">\n        <path d=\"M64 61.9v-20l-30 20v-20L5.6 60.8l-1.2-1.6L36 38.1v20l30-20v20l28.4-18.9 1.2 1.6z\" />\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\nimport Select from 'react-select';\nimport 'react-select/dist/react-select.css';\n\nimport './WaveformSelector.css';\nimport SineWaveIcon from './icon/SineWaveIcon';\nimport TriangleWaveIcon from './icon/TriangleWaveIcon';\nimport SquareWaveIcon from './icon/SquareWaveIcon';\nimport SawtoothWaveIcon from './icon/SawtoothWaveIcon';\n\nconst options = [\n  { value: 'sine', label: <span><SineWaveIcon />Sine</span> },\n  { value: 'triangle', label: <span><TriangleWaveIcon />Triangle</span> },\n  { value: 'square', label: <span><SquareWaveIcon />Square</span> },\n  { value: 'sawtooth', label: <span><SawtoothWaveIcon />Sawtooth</span> },\n];\n\n\nfunction WaveformSelector({\n  value,\n  onChange,\n}) {\n  return (\n    <Select\n      className=\"waveform-selector\"\n      options={options}\n      value={value}\n      onChange={({ value }) => onChange(value)}\n      clearable={false}\n      searchable={false}\n    />\n  );\n}\n\nexport default WaveformSelector;\n","export const keyToDegree = {\n  'q': -9,\n  '2': -8,\n  'w': -7,\n  '3': -6,\n  'e': -5,\n  'r': -4,\n  '5': -3,\n  't': -2,\n  '6': -1,\n  'y': 0,  // A 440\n  '7': 1,\n  'u': 2,\n  'i': 3,\n  '9': 4,\n  'o': 5,\n  '0': 6,\n  'p': 7,\n  '[': 8,\n  '=': 9,\n  ']': 10,\n};\n\nexport const degreeToNote = {\n  '-9': 'C -1',\n  '-8': 'C# -1',\n  '-7': 'D -1',\n  '-6': 'D# -1',\n  '-5': 'E -1',\n  '-4': 'F -1',\n  '-3': 'F# -1',\n  '-2': 'G -1',\n  '-1': 'G#',\n  '0': 'A',\n  '1': 'A#',\n  '2': 'B',\n  '3': 'C',\n  '4': 'C#',\n  '5': 'D',\n  '6': 'D#',\n  '7': 'E',\n  '8': 'F',\n  '9': 'F#',\n  '10': 'G',\n};\n\nexport const keyToPosition = {\n  'q': 0,\n  '2': 0.5,\n  'w': 1,\n  '3': 1.5,\n  'e': 2,\n  'r': 3,\n  '5': 3.5,\n  't': 4,\n  '6': 4.5,\n  'y': 5,  // A 440\n  '7': 5.5,\n  'u': 6,\n  'i': 7,\n  '9': 7.5,\n  'o': 8,\n  '0': 8.5,\n  'p': 9,\n  '[': 10,\n  '=': 10.5,\n  ']': 11,\n};\n\nexport function getDegreeForKey(key) {\n  return keyToDegree[key];\n}\n\nexport function degreeToFrequency(degree) {\n  return 440 * (1.059463094359 ** degree);\n}\n","import React from 'react';\nimport { pull } from 'lodash';\nimport './Keyboard.css';\nimport {\n  keyToPosition,\n  keyToDegree,\n} from '../utils/KeyboardUtils';\n\nclass Keyboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      keysHeld: [],\n      sequencedNote: null,\n    };\n\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n  }\n\n  componentDidMount() {\n    document.body.addEventListener('keydown', this.onKeyDown);\n    document.body.addEventListener('keyup', this.onKeyUp);\n\n    const doFrame = () => {\n      this.setState(({ sequencedNote }) => {\n        const { getCurrentTime, tempo, pattern } = this.props;\n        const secondsPerBeat = (60 / (tempo * 4));\n        const currentBeatIndex = Math.floor(getCurrentTime() / secondsPerBeat) % 16;\n\n        const currentNote = pattern.activeSettings[currentBeatIndex]\n          ? (pattern.degreeSettings[currentBeatIndex] || 0)\n          : null;\n\n        if (sequencedNote === currentNote) {\n          return null;\n        }\n\n        return { sequencedNote: currentNote };\n      });\n      this.animationFrame = requestAnimationFrame(doFrame);\n    };\n\n    doFrame();\n  }\n\n  componentWillUnmount() {\n    document.body.removeEventListener('keydown', this.onKeyDown);\n    document.body.removeEventListener('keyup', this.onKeyUp);\n\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n    }\n  }\n\n  onKeyDown(e) {\n    this.setState(({ keysHeld }) => {\n      if (!keysHeld.includes(e.key) && e.key in keyToPosition) {\n        return {\n          keysHeld: [\n            ...keysHeld,\n            e.key,\n          ],\n        };\n      }\n    });\n  }\n\n  onKeyUp(e) {\n    this.setState(({ keysHeld }) => {\n      return {\n        keysHeld: pull(keysHeld, e.key),\n      };\n    });\n  }\n\n  render() {\n    const { keysHeld, sequencedNote } = this.state;\n    const whiteKeys = Object.entries(keyToPosition)\n      .filter(([key, position]) => position % 1 === 0)\n      .sort(([, positionA], [, positionB]) => positionA - positionB);\n    const blackKeys = Object.entries(keyToPosition)\n      .filter(([key, position]) => position % 1 !== 0)\n      .sort(([, positionA], [, positionB]) => positionA - positionB);\n\n    return (\n      <div style={{ height: 70, position: 'relative', padding: 10 }}>\n        <div>\n          {blackKeys.map(([key, position]) => {\n            let className = 'key key--black';\n            if (keysHeld.includes(key)) {\n              className += ' key--pressed';\n            } else if (sequencedNote === keyToDegree[key]) {\n              className += ' key--sequenced';\n            }\n\n            return (\n              <div\n                key={key}\n                className={className}\n                style={{\n                  position: 'absolute',\n                  left: position * 45,\n                }}\n              >\n                {key}\n              </div>\n            );\n          })}\n        </div>\n        <div style={{ paddingTop: 35 }}>\n          {whiteKeys.map(([key, position]) => {\n            let className = 'key key--white';\n            if (keysHeld.includes(key)) {\n              className += ' key--pressed';\n            } else if (sequencedNote === keyToDegree[key]) {\n              className += ' key--sequenced';\n            }\n            return (\n              <div\n                key={key}\n                className={className}\n                style={{\n                  position: 'absolute',\n                  left: position * 45,\n                }}\n              >\n                {key}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Keyboard;\n","import React from 'react';\nimport './DegreeKnob.css';\n\nimport { degreeToNote } from '../utils/KeyboardUtils';\n\n\nimport Knob from './Knob';\n\nconst defaultProps = {\n  min: 0,\n  max: 1,\n  step: 'any',\n};\n\nfunction DegreeKnob({\n  label,\n  min,\n  max,\n  step,\n  valueKey,\n  config,\n  onChange,\n}) {\n  return (\n    <div>\n      <Knob\n        min={min}\n        max={max}\n        step={step}\n        value={config[valueKey]}\n        onChange={(value) => onChange(valueKey, value)}\n      />\n      <div className=\"degree-knob__value\">\n        {degreeToNote[config[valueKey]]}\n      </div>\n    </div>\n  );\n}\n\nDegreeKnob.defaultProps = defaultProps;\n\nexport default DegreeKnob;\n","import React from 'react';\nimport { range } from 'lodash'\n\nimport { keyToDegree } from '../utils/KeyboardUtils';\n\nimport './Sequencer.css';\n\nimport DegreeKnob from './DegreeKnob';\n\nconst noteDegrees = Object.values(keyToDegree);\nconst minNoteDegree = Math.min(...noteDegrees);\nconst maxNoteDegree = Math.max(...noteDegrees);\n\nclass Sequencer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      beatIndex: 0,\n    };\n\n    this.onKnobChanged = this.onKnobChanged.bind(this);\n  }\n\n  componentDidMount() {\n    const { getCurrentTime, tempo } = this.props;\n    const doFrame = () => {\n      this.setState(({ beatIndex }) => {\n        const secondsPerBeat = (60 / (tempo * 4));\n        const currentBeatIndex = Math.floor(getCurrentTime() / secondsPerBeat) % 16;\n        if (currentBeatIndex === beatIndex) {\n          return null;\n        }\n\n        return { beatIndex: currentBeatIndex };\n      });\n      this.animationFrame = requestAnimationFrame(doFrame);\n    };\n\n    doFrame();\n  }\n\n  componentWillUnmount() {\n    if (this.animationFrame) {\n      cancelAnimationFrame(this.animationFrame);\n    }\n  }\n\n  onKnobChanged(key, value) {\n    const { onNoteDegreeChange } = this.props;\n    onNoteDegreeChange(key, value);\n  }\n\n  onNoteSelected(degree, selected) {\n    const { onNoteActiveChange } = this.props;\n    onNoteActiveChange(degree, selected);\n  }\n\n  render() {\n    const {\n      pattern: {\n        degreeSettings,\n        activeSettings,\n      },\n    } = this.props;\n\n    const { beatIndex } = this.state;\n\n    const mergedDegreeSettings = {\n      ...range(16).reduce((acc, i) => ({\n        ...acc,\n        [i]: 0,\n      }), {}),\n      ...degreeSettings,\n    };\n\n    return (\n      <div className=\"sequencer__container\">\n        {range(16).map(i => {\n          const wrapperClasses = 'sequencer-note' + (beatIndex === i ? ' sequencer-note--current' : '');\n          return (\n            <div key={i} className={wrapperClasses}>\n              <DegreeKnob\n                valueKey={i}\n                min={minNoteDegree}\n                max={maxNoteDegree}\n                step={1}\n                onChange={this.onKnobChanged}\n                config={mergedDegreeSettings}\n              />\n              <div>\n                <input\n                  id={`note-active-${i}`}\n                  className=\"sequencer-note__checkbox\"\n                  type=\"checkbox\"\n                  checked={Boolean(activeSettings[i])}\n                  onChange={(e) => this.onNoteSelected(i, e.target.checked)}\n                />\n                <label\n                  htmlFor={`note-active-${i}`}\n                />\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default Sequencer;\n","import React from 'react';\n\nclass Oscilloscope extends React.Component {\n\n  componentDidMount() {\n    const { analyser } = this.props;\n    const bufferLength = analyser.fftSize;\n    const dataArray = new Float32Array(bufferLength);\n\n    const WIDTH = 300;\n    const HEIGHT = 150;\n\n    const canvasCtx = this.canvasRef.getContext('2d');\n\n    const onAnimationFrame = () => {\n      const { vco1Octave, vco2Octave, freq, sampleRate } = this.props;\n      // Code here adapted from:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\n      const oscPeriod = 1 / (Math.min(freq * (2 ** vco1Octave), freq * (2 ** vco2Octave)) || 440);\n      const timeInSamples = Math.round(4 * oscPeriod * sampleRate);\n      analyser.getFloatTimeDomainData(dataArray);\n\n      let firstCross;\n      for (let i = 0; i < dataArray.length -1; i += 1) {\n        if (dataArray[i] > 0 && dataArray[i + 1] <= 0) {\n          firstCross = i;\n          break;\n        }\n      }\n\n      canvasCtx.fillStyle = 'rgb(200, 200, 200)';\n      canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\n\n      canvasCtx.lineWidth = 2;\n      canvasCtx.strokeStyle = 'rgb(0, 0, 0)';\n\n      canvasCtx.beginPath();\n\n      let sliceWidth = WIDTH * 1.0 / (Math.min(timeInSamples / 2, bufferLength));\n      let x = 0;\n\n      for(let i = firstCross; i < Math.min(timeInSamples, bufferLength); i++) {\n\n        let v = dataArray[i];\n        let y = v * 0.5 * HEIGHT/2 + HEIGHT / 2;\n\n        if(i === 0) {\n          canvasCtx.moveTo(x, y);\n        } else {\n          canvasCtx.lineTo(x, y);\n        }\n\n        x += sliceWidth;\n      }\n\n      canvasCtx.lineTo(this.canvasRef.width, this.canvasRef.height/2);\n      canvasCtx.stroke();\n\n      requestAnimationFrame(onAnimationFrame);\n    };\n\n    requestAnimationFrame(onAnimationFrame);\n  }\n\n  render() {\n    return (\n      <canvas ref={(ref) => { this.canvasRef = ref; }} style={{ width: 300, height: 150 }} />\n    );\n  }\n}\n\nexport default Oscilloscope;\n","import React from 'react';\n\nclass SpectrumAnalyser extends React.Component {\n  componentDidMount() {\n    const { analyser } = this.props;\n    const bufferLength = analyser.fftSize;\n    const dataArray = new Float32Array(bufferLength);\n\n    const WIDTH = 300;\n    const HEIGHT = 150;\n\n    const canvasCtx = this.canvasRef.getContext('2d');\n\n    const onAnimationFrame = () => {\n      // Code here adapted from:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\n      analyser.getFloatFrequencyData(dataArray);\n\n      canvasCtx.fillStyle = 'rgb(200, 200, 200)';\n      canvasCtx.fillRect(0, 0, WIDTH, HEIGHT);\n\n      canvasCtx.lineWidth = 2;\n      canvasCtx.strokeStyle = 'rgb(0, 0, 0)';\n\n      canvasCtx.beginPath();\n\n      const logScale = WIDTH * 1.0 / Math.log(bufferLength / 2);\n\n      for(let i = 0; i < bufferLength / 2; i++) {\n\n        const v = dataArray[i];\n        const y = (0.4 - (v / 100)) * HEIGHT / 2;\n\n        const x =  Math.log(i + 1) * logScale;\n\n        if(i === 0) {\n          canvasCtx.moveTo(x, y);\n        } else {\n          canvasCtx.lineTo(x, y);\n        }\n\n      }\n\n      canvasCtx.lineTo(this.canvasRef.width, this.canvasRef.height/2);\n      canvasCtx.stroke();\n\n      requestAnimationFrame(onAnimationFrame);\n    };\n\n    onAnimationFrame();\n  }\n\n  render() {\n    return (\n      <canvas ref={(ref) => { this.canvasRef = ref; }} style={{ width: 300, height: 150 }} />\n    );\n  }\n}\n\nexport default SpectrumAnalyser;\n","import React from 'react';\nimport './VisibilitySettings.css'\n\nfunction SectionSetting({\n  sectionName,\n  selected,\n  onChange,\n}) {\n  return (\n    <label className=\"section-setting\">\n      {sectionName}\n      <input\n        id={`${sectionName}-is-visible-checkbox`}\n        type=\"checkbox\"\n        checked={selected}\n        onChange={(e) => onChange(sectionName, e.target.checked)}\n      />\n    </label>\n  );\n}\n\nexport default function VisibilitySettings({\n  sectionsShown,\n  onChange,\n}) {\n  return (\n    <div className=\"visibility-settings\">\n      {Object.entries(sectionsShown).map(([sectionName, selected]) => (\n        <SectionSetting\n          key={sectionName}\n          sectionName={sectionName}\n          selected={selected}\n          onChange={(sectionName, checked) => onChange({\n            ...sectionsShown,\n            [sectionName]: checked,\n          })}\n        />\n      ))}\n    </div>\n  );\n}\n","import * as EnvGen from 'fastidious-envelope-generator';\n\nimport {\n  createNoiseSource,\n} from './utils/AudioUtils';\n\n\nexport const defaultConfig = {\n  // Sources\n  vco1Volume: 1,\n  vco1Waveform: 'sine',\n  vco1Detune: 0,\n  vco1Octave: 0,\n\n  vco2Volume: 1,\n  vco2Waveform: 'sine',\n  vco2Detune: 0,\n  vco2Octave: 0,\n\n  noiseVolume: 0,\n\n  // Filters\n  fltHighPassFreq: 0,\n  fltHighPassRes: 0,\n\n  fltLowPassFreq: 10000,\n  fltLowPassRes: 0,\n\n  // Global\n  globalVolume: 0.3,\n\n  // Modulation\n  lfoFreq: 2,\n\n  vcoFreqEnvMod: 0,\n  vcoFreqLfoMod: 0,\n\n  fltHpEnvMod: 0,\n  fltHpLfoMod: 0,\n  fltLpEnvMod: 0,\n  fltLpLfoMod: 0,\n\n  envAttack: 0.0004,\n  envDecay: 0.0004,\n  envSustain: 0.5,\n  envRelease: 0.0004,\n};\n\n\nexport default function createSynthesizer(config, audioCtx) {\n  // Sound sources ------------------------\n  const vco1 = audioCtx.createOscillator();\n  vco1.type = config.vco1Waveform;\n  vco1.frequency.value = 440;\n  vco1.detune.value = config.vco1Detune\n  vco1.start();\n  const vco1OctaveDetune = audioCtx.createConstantSource();\n  vco1OctaveDetune.offset.value = config.vco1Octave * 1200;\n  vco1OctaveDetune.start();\n\n  const vco2 = audioCtx.createOscillator();\n  vco2.type = config.vco2Waveform;\n  vco2.frequency.value = 440; // value in hertz\n  vco1.detune.value = config.vco2Detune\n  vco2.start();\n  const vco2OctaveDetune = audioCtx.createConstantSource();\n  vco2OctaveDetune.offset.value = config.vco2Octave * 1200;\n  vco2OctaveDetune.start();\n\n  const noiseSource = createNoiseSource(audioCtx);\n\n\n  // Source amps --------------------------\n  const vco1Amp = audioCtx.createGain();\n  vco1Amp.gain.value = config.vco1Volume;\n\n  const vco2Amp = audioCtx.createGain();\n  vco2Amp.gain.value = config.vco2Volume;\n\n  const noiseAmp = audioCtx.createGain();\n  noiseAmp.gain.value = config.noiseVolume;\n\n  const vcoOverallAmp = audioCtx.createGain();\n  vcoOverallAmp.gain.value = 0;\n\n\n  // Filters ------------------------------\n  const fltHighPass = audioCtx.createBiquadFilter();\n  fltHighPass.type = 'highpass';\n  fltHighPass.Q.value = config.fltHighPassRes;\n  fltHighPass.frequency.value = config.fltHighPassFreq;\n\n  const fltLowPass = audioCtx.createBiquadFilter();\n  fltLowPass.type = 'lowpass';\n  fltLowPass.Q.value = config.fltLowPassRes;\n  fltLowPass.frequency.value = config.fltLowPassFreq;\n\n\n  // Global effects -----------------------\n  const volume = audioCtx.createGain();\n  volume.gain.value = config.globalVolume;\n\n\n  // Modulation generators ----------------\n  const envelopeSource = audioCtx.createConstantSource();\n  envelopeSource.offset.value = 1;\n  envelopeSource.start();\n\n  const envelopeGain = audioCtx.createGain();\n  envelopeGain.gain.setValueAtTime(0, 0);\n  envelopeSource.connect(envelopeGain);\n\n  const envelopeGenerator = new EnvGen(audioCtx, envelopeGain.gain);\n  envelopeGenerator.mode = 'ADSR';\n  envelopeGenerator.attackTime = config.envAttack;\n  envelopeGenerator.decayTime = config.envDecay;\n  envelopeGenerator.sustainLevel = config.envSustain;\n  envelopeGenerator.releaseTime = config.envRelease;\n\n  const lfo = audioCtx.createOscillator();\n  lfo.type = 'triangle';\n  lfo.frequency.value = config.lfoFreq;\n  lfo.start();\n\n\n  // Modulation gains ---------------------\n  const vcoFreqEnvMod = audioCtx.createGain();\n  vcoFreqEnvMod.gain.value = config.vcoFreqEnvMod;\n\n  const vcoFreqLfoMod = audioCtx.createGain();\n  vcoFreqLfoMod.gain.value = config.vcoFreqLfoMod;\n\n  const fltHpEnvMod = audioCtx.createGain();\n  fltHpEnvMod.gain.value = config.fltHpEnvMod;\n\n  const fltHpLfoMod = audioCtx.createGain();\n  fltHpLfoMod.gain.value = config.fltHpLfoMod;\n\n  const fltLpEnvMod = audioCtx.createGain();\n  fltLpEnvMod.gain.value = config.fltLpEnvMod;\n\n  const fltLpLfoMod = audioCtx.createGain();\n  fltLpLfoMod.gain.value = config.fltLpLfoMod;\n\n  const analyser = audioCtx.createAnalyser();\n  analyser.fftSize = 4096;\n\n\n  // Basic wiring\n  vco1.connect(vco1Amp);\n  vco2.connect(vco2Amp);\n  noiseSource.connect(noiseAmp);\n\n  vco1Amp.connect(vcoOverallAmp);\n  vco2Amp.connect(vcoOverallAmp);\n  noiseAmp.connect(vcoOverallAmp);\n\n  vcoOverallAmp.connect(fltHighPass);\n\n  fltHighPass.connect(fltLowPass);\n\n  fltLowPass.connect(volume);\n  fltLowPass.connect(analyser);\n  volume.connect(audioCtx.destination);\n\n\n  // Modulation connections\n  envelopeGain.connect(vcoOverallAmp.gain);\n  envelopeGain.connect(vcoFreqEnvMod);\n  envelopeGain.connect(fltHpEnvMod);\n  envelopeGain.connect(fltLpEnvMod);\n\n  fltHpEnvMod.connect(fltHighPass.detune);\n  fltHpLfoMod.connect(fltHighPass.detune);\n\n  fltLpEnvMod.connect(fltLowPass.detune);\n  fltLpLfoMod.connect(fltLowPass.detune);\n\n  lfo.connect(vcoFreqLfoMod);\n  lfo.connect(fltHpLfoMod);\n  lfo.connect(fltLpLfoMod);\n\n  vcoFreqEnvMod.connect(vco1.detune);\n  vcoFreqEnvMod.connect(vco2.detune);\n  vcoFreqLfoMod.connect(vco1.detune);\n  vcoFreqLfoMod.connect(vco2.detune);\n  vco1OctaveDetune.connect(vco1.detune);\n  vco2OctaveDetune.connect(vco2.detune);\n\n  const configToUpdater = {\n    vco1Volume(v = 1) { vco1Amp.gain.value = v; },\n    vco1Waveform(v = 'sine') { vco1.type = v; },\n    vco1Detune(v = 0)  { vco1.detune.value = v; },\n    vco1Octave(v = 0) { vco1OctaveDetune.offset.value = v * 1200 },\n\n    vco2Volume(v = 1) { vco2Amp.gain.value = v; },\n    vco2Waveform(v = 'sine') { vco2.type = v; },\n    vco2Detune(v = 0)  { vco2.detune.value = v; },\n    vco2Octave(v = 0) { vco2OctaveDetune.offset.value = v * 1200 },\n\n    noiseVolume(v = 0) { noiseAmp.gain.value = v; },\n\n    // Filters\n    fltHighPassFreq(v = 0) { fltHighPass.frequency.value = v; },\n    fltHighPassRes(v = 0) { fltHighPass.Q.value = v; },\n\n    fltLowPassFreq(v = 0) { fltLowPass.frequency.value = v; },\n    fltLowPassRes(v = 0) { fltLowPass.Q.value = v; },\n\n    // Global\n    globalVolume(v = 0.3) { volume.gain.value = v; },\n\n    // Modulation\n    lfoFreq(v = 2) { lfo.frequency.value = v; },\n\n    vcoFreqEnvMod(v = 0) { vcoFreqEnvMod.gain.value = v; },\n    vcoFreqLfoMod(v = 0) { vcoFreqLfoMod.gain.value = v; },\n\n    fltHpEnvMod(v = 0) { fltHpEnvMod.gain.value = v; },\n    fltHpLfoMod(v = 0) { fltHpLfoMod.gain.value = v; },\n    fltLpEnvMod(v = 0) { fltLpEnvMod.gain.value = v; },\n    fltLpLfoMod(v = 0) { fltLpLfoMod.gain.value = v; },\n    envAttack(v) { envelopeGenerator.attackTime = config.envAttack; },\n    envDecay(v) { envelopeGenerator.decayTime = config.envDecay; },\n    envSustain(v) { envelopeGenerator.sustainLevel = config.envSustain; },\n    envRelease(v) { envelopeGenerator.releaseTime = config.envRelease; },\n  };\n\n  function scheduleAttackAtTime(time) {\n    envelopeGenerator.gateOn(time);\n  }\n\n  function scheduleReleaseAtTime(time) {\n    envelopeGenerator.gateOff(time);\n  }\n\n  function setVcoFrequencyAtTime(frequency, time) {\n    vco1.frequency.setValueAtTime(frequency, time);\n    vco2.frequency.setValueAtTime(frequency, time);\n  }\n\n  function updateConfig(configUpdates) {\n    config = {\n      ...config,\n      ...configUpdates,\n    };\n\n    Object.entries(configUpdates).forEach(([key, value]) => {\n      const updater = configToUpdater[key];\n      if (updater) {\n        updater(value);\n      }\n    });\n  }\n\n  return {\n    scheduleAttackAtTime,\n    scheduleReleaseAtTime,\n    setVcoFrequencyAtTime,\n    updateConfig,\n    analyser,\n  };\n}\n","export function createNoiseSource(audioCtx) {\n  // Source: https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n\n  const noiseBuf = audioCtx.createBuffer(2, audioCtx.sampleRate * 3, audioCtx.sampleRate);\n\n  // Fill the buffer with white noise;\n  //just random values between -1.0 and 1.0\n  for (var channel = 0; channel < noiseBuf.numberOfChannels; channel++) {\n    // This gives us the actual ArrayBuffer that contains the data\n    var nowBuffering = noiseBuf.getChannelData(channel);\n    for (var i = 0; i < noiseBuf.length; i++) {\n      // Math.random() is in [0; 1.0]\n      // audio needs to be in [-1.0; 1.0]\n      nowBuffering[i] = Math.random() * 2 - 1;\n    }\n  }\n\n  // Get an AudioBufferSourceNode.\n  // This is the AudioNode to use when we want to play an AudioBuffer\n  const noiseSource = audioCtx.createBufferSource();\n  // set the buffer in the AudioBufferSourceNode\n  noiseSource.buffer = noiseBuf;\n  // start the source playing\n  noiseSource.loop = true;\n  noiseSource.start();\n\n  return noiseSource;\n}\n","import * as timesync from 'timesync';\nimport Peer from 'peerjs';\n\n// This was mostly taken from the Peer.js example from timesync, see\n// https://github.com/enmasseio/timesync\nexport default function connect(peers, audioCtx, onOpen) {\n  const domSystemTime = document.getElementById('systemTime');\n  const domSyncTime = document.getElementById('syncTime');\n  const domOffset = document.getElementById('offset');\n  const domSyncing = document.getElementById('syncing');\n\n  const ts = timesync.create({\n    peers: [], // start empty, will be updated at the start of every synchronization\n    interval: peers.length > 0 ? 5000 : null,\n    delay: 200,\n    timeout: 1000,\n    now: () => audioCtx.currentTime,\n  });\n\n  ts.on('sync', function (state) {\n    console.log('sync ' + state);\n    if (state === 'start') {\n      ts.options.peers = openConnections();\n      console.log('syncing with peers [' + ts.options.peers.join(', ') + ']');\n      if (ts.options.peers.length) {\n        domSyncing.innerHTML =\n          'syncing with ' + ts.options.peers.join(', ') + '...';\n      }\n    }\n    if (state === 'end') {\n      domSyncing.innerHTML = '';\n    }\n  });\n\n  ts.on('change', function (offset) {\n    console.log('changed offset: ' + offset);\n    domOffset.innerHTML = `Offset: ${offset.toFixed(1)}s`;\n  });\n\n  ts.send = function (id, data) {\n    //console.log('send', id, data);\n    const all = peer.connections[id];\n    const conn =\n      all &&\n      all.filter(function (conn) {\n        return conn.open;\n      })[0];\n\n    if (conn) {\n      conn.send(data);\n    } else {\n      console.log(\n        new Error('Cannot send message: not connected to ' + id).toString(),\n      );\n    }\n\n    // Ignore timeouts\n    return Promise.resolve();\n  };\n\n  // show the system time and synced time once a second on screen\n  function updateDisplay() {\n    domSystemTime.innerText = `Local time: ${audioCtx.currentTime.toFixed(2)}`;\n    domSyncTime.innerText = `Synced time: ${ts.now().toFixed(2)}`;\n\n    setTimeout(updateDisplay, 100);\n  }\n  setTimeout(updateDisplay, 100);\n\n  // Create a new Peer with the demo API key\n  const peer = new Peer({\n    host: 'synth-beat-connection.herokuapp.com',\n    port: '443',\n    secure: true,\n    debug: 1,\n  });\n  peer.on('open', connectToPeers);\n  peer.on('connection', setupConnection);\n\n  function openConnections() {\n    if (!peer.connections) {\n      return [];\n    }\n    return Object.keys(peer.connections).filter(function (id) {\n      return peer.connections[id].some(function (conn) {\n        return conn.open;\n      });\n    });\n  }\n\n  function connectToPeers() {\n    onOpen(peer);\n    peers\n      .filter(function (id) {\n        return !peer.connections || peer.connections[id] === undefined;\n      })\n      .forEach(function (id) {\n        console.log('connecting with ' + id + '...');\n        const conn = peer.connect(id);\n        setupConnection(conn);\n      });\n  }\n\n  function setupConnection(conn) {\n    conn\n      .on('open', function () {\n        console.log('connected with ' + conn.peer);\n      })\n      .on('data', function (data) {\n        //console.log('receive', conn.peer, data);\n        ts.receive(conn.peer, data);\n      })\n      .on('close', function () {\n        console.log('disconnected from ' + conn.peer);\n      })\n      .on('error', function (err) {\n        console.log('Error', err);\n      });\n  }\n\n  // check whether there are connections missing every 10 sec\n  setInterval(connectToPeers, 10000);\n\n  return {\n    peer: peer,\n    ts: ts,\n  };\n}\n","import React from 'react';\nimport * as qs from 'qs';\nimport { debounce, omit } from 'lodash';\n\nimport LabeledKnob from './LabeledKnob';\nimport WaveformSelector from './WaveformSelector';\nimport Keyboard from './Keyboard';\nimport Sequencer from './Sequencer';\nimport Oscilloscope from './Oscilloscope';\nimport SpectrumAnalyser from './SpectrumAnalyser';\nimport VisibilitySettings from './VisibilitySettings';\n\nimport {\n  keyToDegree,\n  getDegreeForKey,\n  degreeToFrequency,\n} from '../utils/KeyboardUtils';\n\nimport createSynthesizer, { defaultConfig } from '../Synthesizer';\n\nimport connect from '../webRtcConnection';\n\nfunction convertToBooleanConfig(config) {\n  const res = Object.entries(config).reduce((acc, [key, value]) => {\n    return {\n      ...acc,\n      [key]: value === 'true',\n    };\n  }, {});\n  return res;\n}\n\nfunction convertToNumericConfig(config) {\n  const res = Object.entries(config).reduce((acc, [key, value]) => {\n    return {\n      ...acc,\n      [key]: isNaN(value) ? value : Number(value),\n    };\n  }, {});\n  return res;\n}\n\nconst defaultSectionsShown = {\n  keyboard: true,\n  sequencer: false,\n  filter: true,\n  modulation: true,\n};\n\nfunction getStateFromQueryString() {\n  const queryString = window.location.search.slice(1);\n  const queryParams = qs.parse(queryString, { arrayLimit: 0 });\n\n  const synthConfig = {\n    ...defaultConfig,\n    ...convertToNumericConfig(omit(queryParams, 'na', 'nd', 'ss')),\n  };\n\n  const pattern = {\n    activeSettings: convertToBooleanConfig(queryParams.na || {}),\n    degreeSettings: convertToNumericConfig(queryParams.nd || {}),\n  };\n\n  const sectionsShown = {\n    ...defaultSectionsShown,\n    ...convertToBooleanConfig(queryParams.ss || {}),\n  };\n\n  return {\n    synthConfig,\n    pattern,\n    sectionsShown,\n  };\n}\n\nclass SynthContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const queryState = getStateFromQueryString();\n    const { synthConfig } = queryState;\n\n    const audioCtx = new AudioContext({ latencyHint: 0 });\n\n    this.synthesizer = createSynthesizer(synthConfig, audioCtx);\n\n    this.keysHeld = [];\n    this.keyIsHeld = false;\n\n    this.tempo = 100;\n\n    this.audioCtx = audioCtx;\n\n    this.state = {\n      ...queryState,\n      vco1Freq: 440,\n      vco2Freq: 440,\n      isLeader: false,\n      peerId: undefined,\n      connectedPeerId: undefined,\n    };\n\n    this.onConfigChange = this.onConfigChange.bind(this);\n    this.onNoteDegreeChange = this.onNoteDegreeChange.bind(this);\n    this.onNoteActiveChange = this.onNoteActiveChange.bind(this);\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n    this.connectToPeer = this.connectToPeer.bind(this);\n    this.becomeLeader = this.becomeLeader.bind(this);\n    this.getCurrentTime = this.getCurrentTime.bind(this);\n    this.pushHistoryUpdateDebounced = debounce(\n      this.pushHistoryUpdate.bind(this),\n      1000,\n      { trailing: true },\n    );\n  }\n\n  componentDidMount() {\n    document.body.addEventListener('keydown', (e) => {\n      if (!this.keysHeld.includes(e.key) && e.key in keyToDegree) {\n        this.keysHeld.push(e.key);\n      }\n      this.onKeysChanged();\n    });\n\n    document.body.addEventListener('keyup', (e) => {\n      this.keysHeld.splice(this.keysHeld.indexOf(e.key), 1);\n      this.onKeysChanged();\n    });\n\n    window.addEventListener('popstate', (e) => {\n      const queryState = getStateFromQueryString();\n\n      this.synthesizer.updateConfig(queryState.synthConfig);\n      this.setState(queryState);\n    });\n\n    const NOTE_SCHEDULING_INTERVAL_MS = 100;\n    const NOTE_SCHEDULING_RANGE_MS = 150;\n\n    this.lastScheduledTime = -1;\n\n    const scheduleNotes = () => {\n      const currentTime = this.getCurrentTime();\n      const startTime = currentTime;\n      const endTime = startTime + NOTE_SCHEDULING_RANGE_MS / 1000;\n\n      const secondsPerBeat = 60 / (this.tempo * 4);\n\n      let nextAttackIndex = Math.ceil(currentTime / secondsPerBeat);\n\n      const attacks = [];\n\n      const {\n        pattern: { activeSettings, degreeSettings },\n      } = this.state;\n\n      while (nextAttackIndex * secondsPerBeat < endTime) {\n        if (activeSettings[nextAttackIndex % 16]) {\n          attacks.push([\n            nextAttackIndex,\n            degreeSettings[nextAttackIndex % 16] || 0,\n          ]);\n        }\n        nextAttackIndex += 1;\n      }\n\n      attacks.forEach(([attackIndex, degree]) => {\n        this.scheduleAttack({\n          startTime,\n          endTime,\n          nextAttackTime: attackIndex * secondsPerBeat,\n          timeToRelease: secondsPerBeat * 0.9,\n          degree,\n        });\n      });\n\n      this.lastScheduledTime = endTime;\n\n      setTimeout(scheduleNotes, NOTE_SCHEDULING_INTERVAL_MS);\n    };\n\n    scheduleNotes();\n\n    // Fix taken from https://github.com/peers/peerjs/issues/278#issuecomment-107276110\n    const pingPeer = () => {\n      if (this.peer) {\n        this.peer.socket.send({ type: 'ping' });\n      }\n\n      setTimeout(pingPeer, 20000);\n    };\n\n    setTimeout(pingPeer, 20000);\n  }\n\n  connectToPeer() {\n    const { connectedPeerId } = this.state;\n    const { peer, ts } = connect(\n      connectedPeerId ? [connectedPeerId] : [],\n      this.audioCtx,\n      (peer) => {\n        this.setState({ peerId: peer.id });\n      },\n    );\n    this.audioCtx.resume();\n\n    this.peer = peer;\n    this.timesync = ts;\n  }\n\n  becomeLeader() {\n    this.audioCtx.resume();\n    this.setState(\n      {\n        connectedPeerId: '',\n        isLeader: true,\n      },\n      () => this.connectToPeer(),\n    );\n  }\n\n  getCurrentTime() {\n    if (!this.timesync) {\n      return this.audioCtx.currentTime;\n    }\n\n    return this.timesync.now();\n  }\n\n  scheduleAttack({\n    startTime,\n    endTime,\n    nextAttackTime,\n    timeToRelease,\n    degree,\n  }) {\n    if (\n      nextAttackTime > startTime &&\n      nextAttackTime < endTime &&\n      nextAttackTime > this.lastScheduledTime\n    ) {\n      const offset = this.timesync ? this.timesync.offset : 0;\n      if (this.keysHeld.length < 1) {\n        const frequency = degreeToFrequency(degree);\n\n        this.synthesizer.setVcoFrequencyAtTime(\n          frequency,\n          nextAttackTime - offset,\n        );\n      }\n\n      this.synthesizer.scheduleAttackAtTime(nextAttackTime - offset);\n\n      // Also do release, since we already know when it's going to be and there\n      // won't be another attack between this one and the release\n      // TODO: this will need to be changed at some point as this ^^^ shouldn't be guaranteed\n      this.synthesizer.scheduleReleaseAtTime(\n        nextAttackTime + timeToRelease - offset,\n      );\n    }\n  }\n\n  pushHistoryUpdate() {\n    const {\n      synthConfig,\n      pattern: { activeSettings, degreeSettings },\n      sectionsShown,\n    } = this.state;\n\n    const configDiff = Object.entries(synthConfig).reduce(\n      (acc, [key, value]) => {\n        if (defaultConfig[key] !== value) {\n          return {\n            ...acc,\n            [key]: value,\n          };\n        }\n        return acc;\n      },\n      {},\n    );\n\n    const na = Object.entries(activeSettings).reduce((acc, [key, value]) => {\n      if (value) {\n        return {\n          ...acc,\n          [key]: value,\n        };\n      }\n      return acc;\n    }, {});\n\n    const nd = Object.entries(degreeSettings).reduce((acc, [key, value]) => {\n      if (value !== 0) {\n        return {\n          ...acc,\n          [key]: value,\n        };\n      }\n      return acc;\n    }, {});\n\n    const ss = Object.entries(sectionsShown).reduce((acc, [key, value]) => {\n      if (defaultSectionsShown[key] !== value) {\n        return {\n          ...acc,\n          [key]: value,\n        };\n      }\n      return acc;\n    }, {});\n\n    const diff = {\n      ...configDiff,\n      na,\n      nd,\n      ss,\n    };\n    window.history.pushState({}, '', `?${qs.stringify(diff)}`);\n  }\n\n  onKeysChanged() {\n    this.audioCtx.resume();\n    if (this.keysHeld.length === 0) {\n      if (this.keyIsHeld) {\n        this.onReleaseTrigger();\n        this.keyIsHeld = false;\n      }\n    } else {\n      if (!this.keyIsHeld) {\n        this.onAttackTrigger();\n        this.keyIsHeld = true;\n      }\n      this.setVcoFreq();\n    }\n  }\n\n  onAttackTrigger() {\n    const currentTime = this.audioCtx.currentTime;\n    this.synthesizer.scheduleAttackAtTime(currentTime);\n  }\n\n  onReleaseTrigger() {\n    const currentTime = this.audioCtx.currentTime;\n    this.synthesizer.scheduleReleaseAtTime(currentTime);\n  }\n\n  onNoteDegreeChange(note, degree) {\n    this.setState(\n      ({ pattern }) => ({\n        pattern: {\n          ...pattern,\n          degreeSettings: {\n            ...pattern.degreeSettings,\n            [note]: degree,\n          },\n        },\n      }),\n      () => {\n        this.pushHistoryUpdateDebounced();\n      },\n    );\n  }\n\n  onNoteActiveChange(note, active) {\n    this.setState(\n      ({ pattern }) => ({\n        pattern: {\n          ...pattern,\n          activeSettings: {\n            ...pattern.activeSettings,\n            [note]: active,\n          },\n        },\n      }),\n      () => {\n        this.pushHistoryUpdateDebounced();\n      },\n    );\n  }\n\n  setVcoFreq() {\n    if (this.keysHeld.length < 1) {\n      return;\n    }\n\n    const degree = getDegreeForKey(this.keysHeld[this.keysHeld.length - 1]);\n\n    const frequency = degreeToFrequency(degree);\n\n    this.synthesizer.setVcoFrequencyAtTime(frequency, 0);\n\n    this.setState({ vco1Freq: frequency, vco2Freq: frequency });\n  }\n\n  onConfigChange(key, value) {\n    this.synthesizer.updateConfig({ [key]: value });\n    this.setState(\n      ({ synthConfig }) => ({\n        synthConfig: {\n          ...synthConfig,\n          [key]: value,\n        },\n      }),\n      () => {\n        this.pushHistoryUpdateDebounced();\n      },\n    );\n  }\n\n  onVisibilityChange(sectionsShown) {\n    this.setState({ sectionsShown }, () => this.pushHistoryUpdateDebounced());\n  }\n\n  render() {\n    const {\n      synthConfig: config,\n      vco1Freq,\n      peerId,\n      connectedPeerId,\n      pattern,\n      isLeader,\n      sectionsShown,\n    } = this.state;\n    return (\n      <div>\n        <VisibilitySettings\n          sectionsShown={sectionsShown}\n          onChange={this.onVisibilityChange}\n        />\n        <div>\n          {sectionsShown.keyboard && (\n            <Keyboard\n              pattern={pattern}\n              getCurrentTime={this.getCurrentTime}\n              tempo={this.tempo}\n            />\n          )}\n        </div>\n        <div>\n          {sectionsShown.sequencer && (\n            <Sequencer\n              pattern={pattern}\n              onNoteActiveChange={this.onNoteActiveChange}\n              onNoteDegreeChange={this.onNoteDegreeChange}\n              getCurrentTime={this.getCurrentTime}\n              tempo={this.tempo}\n            />\n          )}\n        </div>\n        <div className=\"inline-container\">\n          <div className=\"section-container\">\n            <h3>Oscillator 1</h3>\n            <div>\n              <WaveformSelector\n                value={config.vco1Waveform}\n                onChange={(value) => {\n                  this.onConfigChange('vco1Waveform', value);\n                }}\n              />\n            </div>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Volume\"\n                valueKey=\"vco1Volume\"\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Detune\"\n                min={-1200}\n                max={1200}\n                valueKey=\"vco1Detune\"\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Octave\"\n                valueKey=\"vco1Octave\"\n                min={-4}\n                max={2}\n                step={1}\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n          </div>\n          <div className=\"section-container\">\n            <h3>Oscillator 2</h3>\n            <div>\n              <WaveformSelector\n                value={config.vco2Waveform}\n                onChange={(value) => {\n                  console.log(value);\n                  this.onConfigChange('vco2Waveform', value);\n                }}\n              />\n            </div>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Volume\"\n                valueKey=\"vco2Volume\"\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Detune\"\n                min={-1200}\n                max={1200}\n                valueKey=\"vco2Detune\"\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Octave\"\n                valueKey=\"vco2Octave\"\n                min={-4}\n                max={2}\n                step={1}\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n          </div>\n          <div className=\"section-container\">\n            <h3>Noise</h3>\n            <div className=\"inline-container\">\n              <LabeledKnob\n                label=\"Volume\"\n                valueKey=\"noiseVolume\"\n                onChange={this.onConfigChange}\n                config={config}\n              />\n            </div>\n          </div>\n          {sectionsShown.modulation && (\n            <div className=\"section-container\">\n              <h3>Frequency Modulation</h3>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"Envelope\"\n                  max={1200}\n                  valueKey=\"vcoFreqEnvMod\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"LFO\"\n                  max={600}\n                  valueKey=\"vcoFreqLfoMod\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n        {sectionsShown.filter && (\n          <div className=\"inline-container\">\n            <div className=\"section-container\">\n              <h3>High Pass Filter</h3>\n              <div>\n                <div className=\"inline-container\">\n                  <LabeledKnob\n                    label=\"Frequency\"\n                    min={0}\n                    max={10000}\n                    valueKey=\"fltHighPassFreq\"\n                    onChange={this.onConfigChange}\n                    config={config}\n                  />\n                </div>\n                <div className=\"inline-container\">\n                  <LabeledKnob\n                    label=\"Resonance\"\n                    min={0}\n                    max={40}\n                    valueKey=\"fltHighPassRes\"\n                    onChange={this.onConfigChange}\n                    config={config}\n                  />\n                </div>\n              </div>\n              {sectionsShown.modulation && (\n                <div>\n                  <div className=\"inline-container\">\n                    <LabeledKnob\n                      label=\"Envelope Mod\"\n                      min={0}\n                      max={10000}\n                      valueKey=\"fltHpEnvMod\"\n                      onChange={this.onConfigChange}\n                      config={config}\n                    />\n                  </div>\n                  <div className=\"inline-container\">\n                    <LabeledKnob\n                      label=\"LFO Mod\"\n                      min={0}\n                      max={10000}\n                      valueKey=\"fltHpLfoMod\"\n                      onChange={this.onConfigChange}\n                      config={config}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n            <div className=\"section-container\">\n              <h3>Low Pass Filter</h3>\n              <div>\n                <div className=\"inline-container\">\n                  <LabeledKnob\n                    label=\"Frequency\"\n                    min={0}\n                    max={10000}\n                    valueKey=\"fltLowPassFreq\"\n                    onChange={this.onConfigChange}\n                    config={config}\n                  />\n                </div>\n                <div className=\"inline-container\">\n                  <LabeledKnob\n                    label=\"Resonance\"\n                    min={0}\n                    max={40}\n                    valueKey=\"fltLowPassRes\"\n                    onChange={this.onConfigChange}\n                    config={config}\n                  />\n                </div>\n              </div>\n              {sectionsShown.modulation && (\n                <div>\n                  <div className=\"inline-container\">\n                    <LabeledKnob\n                      label=\"Envelope Mod\"\n                      min={0}\n                      max={10000}\n                      valueKey=\"fltLpEnvMod\"\n                      onChange={this.onConfigChange}\n                      config={config}\n                    />\n                  </div>\n                  <div className=\"inline-container\">\n                    <LabeledKnob\n                      label=\"LFO Mod\"\n                      min={0}\n                      max={10000}\n                      valueKey=\"fltLpLfoMod\"\n                      onChange={this.onConfigChange}\n                      config={config}\n                    />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        <div className=\"inline-container\">\n          {sectionsShown.modulation && (\n            <div className=\"section-container\">\n              <h3>LFO</h3>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"Frequency\"\n                  min={0}\n                  max={20}\n                  valueKey=\"lfoFreq\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n            </div>\n          )}\n          {sectionsShown.modulation && (\n            <div className=\"section-container\">\n              <h3>Envelope</h3>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"Attack\"\n                  min={0.004}\n                  max={5}\n                  valueKey=\"envAttack\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"Decay\"\n                  min={0.004}\n                  max={5}\n                  valueKey=\"envDecay\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"Sustain\"\n                  valueKey=\"envSustain\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n              <div className=\"inline-container\">\n                <LabeledKnob\n                  label=\"Release\"\n                  min={0.004}\n                  max={5}\n                  valueKey=\"envRelease\"\n                  onChange={this.onConfigChange}\n                  config={config}\n                />\n              </div>\n            </div>\n          )}\n          <div className=\"section-container\">\n            <h3>Oscilloscope</h3>\n            <Oscilloscope\n              vco1Octave={config.vco1Octave}\n              vco2Octave={config.vco2Octave}\n              freq={vco1Freq}\n              sampleRate={this.audioCtx.sampleRate}\n              analyser={this.synthesizer.analyser}\n            />\n            <h3>Spectrum Analyser</h3>\n            <SpectrumAnalyser analyser={this.synthesizer.analyser} />\n          </div>\n        </div>\n        <div className=\"inline-container\">\n          <div className=\"section-container\">\n            <h3>Beat Connection</h3>\n            {!isLeader && (\n              <label>\n                {'Leader ID:\\u00A0'}\n                <input\n                  type=\"text\"\n                  value={connectedPeerId}\n                  onChange={(e) =>\n                    this.setState({ connectedPeerId: e.target.value })\n                  }\n                />\n              </label>\n            )}\n            {!isLeader && (\n              <button onClick={this.connectToPeer}>Connect to leader</button>\n            )}\n            {!isLeader && !peerId && (\n              <div style={{ marginTop: 10 }}>\n                <button onClick={this.becomeLeader}>Become leader</button>\n              </div>\n            )}\n            {peerId && <div>ID: {peerId}</div>}\n            <div id=\"systemTime\" />\n            <div id=\"syncTime\" />\n            <div id=\"offset\" />\n            <div id=\"syncing\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SynthContainer;\n","import React, { Component } from 'react';\nimport './App.css';\nimport SynthContainer from './components/SynthContainer';\n\n\nclass App extends Component {\n  render() {\n    return (\n      <div style={{ padding: 30 }}>\n        <SynthContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (!isLocalhost) {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      } else {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}